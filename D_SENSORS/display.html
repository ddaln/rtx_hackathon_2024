<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Three.js Earthquake Rescue Game</title>
        <style>
            body {
                margin: 0;
                overflow: hidden;
            }

            #minimap {
                position: absolute;
                top: 10px;
                right: 10px;
                border: 1px solid black;
                background: white;
            }

            #chat-container {
                position: absolute;
                bottom: 0;
                width: 100%;
                background: rgba(255, 255, 255, 0.8);
            }

            #global-chat, #private-chat {
                float: left;
                width: 50%;
            }

            #global-messages, #private-messages {
                height: 150px;
                overflow-y: scroll;
            }

            #global-input, #private-input {
                width: 100%;
                box-sizing: border-box;
                padding: 10px;
            }

            #timer {
                position: absolute;
                top: 10px;
                right: 10px;
                font-size: 20px;
                background: rgba(255, 255, 255, 0.8);
                padding: 5px;
                border: 1px solid black;
            }

            #rescued-count {
                position: absolute;
                top: 40px;
                left: 10px;
                font-size: 20px;
                background: rgba(255, 255, 255, 0.8);
                padding: 5px;
                border: 1px solid black;
            }

            canvas {
                display: block;
            }
        </style>
        <script defer="defer" src="bundle.js"></script>
    </head>
    <body>
        <div id="flag" data-sflag="0"></div>
        <div id="image-processing">
            <div id="playerIdDisplay">Player ID:</div>
            <form action="http://172.210.74.144:3000/upload" method="post" enctype="multipart/form-data">
                <input type="file" name="image" required>
                <button type="submit">Upload Walabot File</button>
            </form>
        </div>
        <div id="downloadLinkContainer"></div>
        <script>
            // Example of how to dynamically update the page after receiving the processed image link
            function displayDownloadLink(imageUrl) { 
                const linkContainer = document.getElementById('downloadLinkContainer');
                linkContainer.innerHTML = <a href="${imageUrl}">Download Processed Image</a>;
            }

            // You would call displayDownloadLink() with the URL of the processed image after it is available
        </script>
        <canvas id="minimap" width="200" height="200"></canvas>
        <div id="chat-container">
            <div id="global-chat">
                <div id="global-messages"></div>
                <input id="global-input" placeholder="Type a message...">
            </div>
            <script src="./bundle.js"></script>
        </div>
        <div class="score-panel-container">
            <div id="yourRescues">Your Rescues: 0</div>
            <div id="teamRescues">Team Rescues: 0</div>
            <div id="yourScore">Your Score: 0</div>
            <div id="teamScore">Team Score: 0</div>
        </div>
        <div id="timer">10:00</div>
    </body>
</html>